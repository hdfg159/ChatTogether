<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Authorize</title>
    <script th:inline="javascript">
        function saveUserAuthentication() {
            $.post('[(${#servletContext.contextPath})]/userauthorization/api/save', $('#userAuthenticationForm').serialize(), function () {
            }).done(function (data, textStatus, jqXHR) {
                alert('Success!');
            }).fail(function (jqXHR, textStatus, errorThrown) {
                alert('Request Error!' + errorThrown);
            });
        }
    </script>
</head>
<body>
<div th:replace="template::header"></div>
<h4 th:text="'User Authentication - '+${username}"></h4>
<form th:action="@{/}" id="userAuthenticationForm">
    <label th:each="userPermission:${allPermissions}">
        <input type="checkbox" th:value="${userPermission.id}"
               th:text="${userPermission.roleName}"
               th:checked="${#lists.contains(userPermissions,userPermission)}"
               th:name="'permissions'"/>
        <br>
    </label>
    <input type="hidden" th:name="'username'" th:value="${username}"/>
</form>
<button th:text="'ok'" onclick="saveUserAuthentication()">保存</button>
<div th:replace="template::footer"></div>
</body>
</html>